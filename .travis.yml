language: rust

os:
  - linux
  - osx
  - windows

rust:
  - stable
  - beta
  - nightly

matrix:
  allow_failures:
    - rust: nightly
  fast_finish: true

before_deploy: "./release-build.sh"

deploy:
  - provider: releases
    api_key:
      secure: "ILTVHAI3bCq+95KRVTMmkTPmmQk19E9oFiah1tkisvdmr64bz+jfX3C9quqVsnDFASF7q5A4YgSfvpJGD0XqhZbwl3E88atHP2pqnoMG4/xKKTFD2p9n8+wqbBrCP1xaAUnDncp3eci/xLJ886hTf0vuMtLTYsM45Bero+W/aku3GRQZ+dgFW88XlZAqOyk0IGelt4LUmMOCVdWkNzqPUmY0No2rOsttAHHsbWdhVqFQhL3b6Tb69ouwKH3MSrWokidoMSIDgbRZbVYBW6gE/Pm5IFRM5rH39UunsNp5nyJRIaeto74vy23i57llr+aus6hdal1mKSa8ezVlDYOMer3Ersi6kx3ywz+5v5QMLe61/mVyVvPC3WHBPjqvzT25MA0yDrytU0Mfj/pE6Dx292KkwMXGHRsCc8UsRP6CgXZAxfZqoQXOJYf/AWWdvFSI3zc8ZO6/+rW9IiQ6zKipG+7ehFs/5uS2P18RkwsBmr6TjAVlkyiDWm628VuLPL/n5drfPjEbyveA8RhMuQKwolQ7t+hTLClNuOn8mey13tUOkoKHsrXiq/bVF8ofqt3unaRBkG9EoI6688SPDytykpPaNKJ51Dg28x4E0z6iVsrASVGAPIIeqlAk4cgbJstJztB3pqe6OG+p7onGvmMyLdMuHvlE0bJn4XKnZ3K032I="
    file_glob: true
    skip_cleanup: true
    file: yj.*
    on:
      repo: bruceadams/yj
      rust: stable
      tags: true
  - provider: cargo
    on:
      repo: bruceadams/yj
      condition: "$TRAVIS_OS_NAME" == "linux"
      rust: stable
      tags: true
    token:
      secure: FgPUujt8hRwZap1gCifMuV4N8bwqokPCWRiEufFUmPeqrDP+Hg21bcTOaKwmL4a6WO/63gZwzK4wOlVsMOS8pNOylm72Ju36+pd6B6ntPrB/Yx8gDkvMdLd9/a+QDMsL7UHd7oarTLEi+UDJGM0InH9CPmWVXX6nexlrNhHensas+7Doxwfh40B9bLSDdvm5JBy2L8f38i1voAjslxSKt9svksrJmZL/BtFkJJUB1WMSa+C75iK4955RbRPd6Z3Z7HwmmQFE2FBFoAru2xy13dQE372m4nyjFKQjNLZEKSDQsC+/NXKx7cPYSc381Kto5EwTbuJJsxrABSEVSH5r3TLQba6vrzSZPrvCrqapGHz5nuC+XUr/OzF1awagYbaNZ/Ry2ls8zBuouB02Sd9xJ99XOKFY+8/zTxwfxhTXaBkuAmRk/w8D6do52PX0FCXgOZyuqmW5GcWYhxsCwLSNatGYcvTu+tbls4AZ+ymFydq7rVmyaLJUp6qsfZltybHSLlRJzT9DrSWA/3JgNOuFATlZvnJKB84oJoHVzzZ3MGQY8JfpIhieoTOsd6tdjwk+yD4NZq618OqXLTza79rpG3X0tRJCkh3HML/srOEjHKHB9+V1T+R69nIHNuiVt5J/YuiYO0cnwuzo6yJEvaC5rpgrjWJria5WeAVpCUZdF34=
